{"version":3,"file":"app~71c0e426.bundle.js","mappings":";6ZACA,mjNAiBA,QAhBgB,eADhB,EACgB,GADhB,EACgB,UAAG,uFACX,kBAAmBA,UAAS,gBAC2B,OAA3DC,QAAQC,IAAI,+CAA+C,0BAIP,OAAhDC,EAAK,IAAIC,EAAAA,GAAsB,kBAAiB,kBAG9CD,EAAGE,WAAU,OACnBJ,QAAQC,IAAI,6BAA6B,kDAEzCD,QAAQC,IAAI,oCAAqC,EAAF,IAAS,yDAb5D,+KAeC,kBAde,oDCOVI,EAAM,IAAIC,EAAAA,EAAI,CAClBC,OAAQC,SAASC,cAAc,oBAC/BC,OAAQF,SAASC,cAAc,qBAC/BE,QAASH,SAASC,cAAc,kBAElCG,OAAOC,iBAAiB,cAAc,WACpCR,EAAIS,YACN,IACAF,OAAOC,iBAAiB,QAAQ,WAC9BR,EAAIS,aACJC,GACF,mECTA,QAPe,CACb,IAAKC,EAAAA,EACL,eAAgBA,EAAAA,EAChB,cAAeC,EAAAA,EACf,QAASC,EAAAA,mCCuBX,QA/BkB,CAChBC,2BAA0B,WACxB,IAAMC,EAAMR,OAAOS,SAASC,KAAKC,MAAM,GAAGC,cACpCC,EAAaC,KAAKC,aAAaP,GACrC,OAAOM,KAAKE,aAAaH,EAC3B,EAEAI,8BAA6B,WAC3B,IAAMT,EAAMR,OAAOS,SAASC,KAAKC,MAAM,GAAGC,cAC1C,OAAOE,KAAKC,aAAaP,EAC3B,EAEAO,aAAY,SAACP,GACX,IAAMU,EAAaV,EAAIW,MAAM,KAC7B,MAAO,CACLC,SAAUF,EAAW,IAAM,KAC3BG,GAAIH,EAAW,IAAM,KACrBI,KAAMJ,EAAW,IAAM,KAE3B,EAEAF,aAAY,SAACH,GAIX,OAFEA,EAAWQ,GACVR,EAAWS,MAAO,IAAH,OAAOT,EAAWS,OAC5BT,EAAWO,SAAW,IAAH,OAAOP,EAAWO,UAAa,MACrDP,EAAWQ,GAAK,OAAS,KACzBR,EAAWS,KAAO,IAAH,OAAOT,EAAWS,MAAS,GACjD,mSC3BF,svNA8CA,QA7C4B,CACpBC,KAAI,YAAiD,sHAGnB,OAH3BC,EAAmB,EAAnBA,oBAAqBC,EAAc,EAAdA,eAAgBC,EAAK,EAALA,MAChD,EAAKC,qBAAuBH,EAC5B,EAAKI,OAASF,EACd,EAAKG,gBAAkBJ,EAAe,SAEhC,EAAKK,gBAAe,0CAL+B,EAM3D,EAEMA,cAAa,WAAG,kHACV,OAAFT,EAAO,EAAKO,OAAZP,GAAE,SAEA,EAAKU,cAAcV,GAAG,kCAC9B,EAAKW,eAAe,sBAEpB,EAAKC,cAAc,0CAND,EAQtB,EAEMF,cAAa,SAACV,GAAI,kIACF,EAAKQ,gBAAgBK,cAAcb,GAAG,OAA/C,OAALK,EAAQ,EAAH,yBACFA,GAAK,0CAFQ,EAGxB,EAEAO,YAAW,WAAG,WACZnB,KAAKa,qBAAqBQ,WAAYC,EAAAA,EAAAA,MAEnBxC,SAASC,cAAc,eAC/BI,iBAAiB,QAAO,YAAE,8FAC7B,EAAK4B,gBAAgBQ,cAAc,EAAKT,QAAO,OACrD,EAAKE,gBAAgB,2CAEzB,EAEAE,aAAY,WAAG,WACblB,KAAKa,qBAAqBQ,WAAYG,EAAAA,EAAAA,MAEnB1C,SAASC,cAAc,eAC/BI,iBAAiB,QAAO,YAAE,8FAC7B,EAAK4B,gBAAgBU,iBAAiB,EAAKX,OAAOP,IAAG,OAC3D,EAAKS,gBAAgB,2CAEzB","sources":["webpack://movie-catalogue-lite/./src/scripts/utils/sw-register.js","webpack://movie-catalogue-lite/./src/scripts/index.js","webpack://movie-catalogue-lite/./src/scripts/routes/routes.js","webpack://movie-catalogue-lite/./src/scripts/routes/url-parser.js","webpack://movie-catalogue-lite/./src/scripts/utils/like-button-presenter.js"],"sourcesContent":["import * as WorkboxWindow from 'workbox-window';\r\n\r\nconst swRegister = async () => {\r\n  if (!('serviceWorker' in navigator)) {\r\n    console.log('Service Worker not supported in the browser');\r\n    return;\r\n  }\r\n\r\n  const wb = new WorkboxWindow.Workbox('./sw.bundle.js');\r\n\r\n  try {\r\n    await wb.register();\r\n    console.log('Service worker registered');\r\n  } catch (error) {\r\n    console.log('Failed to register service worker', error);\r\n  }\r\n};\r\n\r\nexport default swRegister;\r\n","import 'regenerator-runtime';\r\nimport '../styles/style.css';\r\nimport './views/templates/footer/footer';\r\nimport './views/templates/header/header';\r\nimport App from './views/app';\r\nimport swRegister from './utils/sw-register';\r\nimport 'lazysizes';\r\nimport 'lazysizes/plugins/parent-fit/ls.parent-fit';\r\n\r\nconst app = new App({\r\n  button: document.querySelector('#hamburgerButton'),\r\n  drawer: document.querySelector('#navigationDrawer'),\r\n  content: document.querySelector('#mainContent'),\r\n});\r\nwindow.addEventListener('hashchange', () => {\r\n  app.renderPage();\r\n});\r\nwindow.addEventListener('load', () => {\r\n  app.renderPage();\r\n  swRegister();\r\n});\r\n","import NowPlaying from '../views/pages/restaurants';\r\nimport Detail from '../views/pages/detail';\r\nimport Like from '../views/pages/like';\r\n\r\nconst routes = {\r\n  '/': NowPlaying, // default page\r\n  '/restaurants': NowPlaying,\r\n  '/detail/:id': Detail,\r\n  '/like': Like,\r\n};\r\n\r\nexport default routes;\r\n","const UrlParser = {\r\n  parseActiveUrlWithCombiner() {\r\n    const url = window.location.hash.slice(1).toLowerCase();\r\n    const splitedUrl = this._urlSplitter(url);\r\n    return this._urlCombiner(splitedUrl);\r\n  },\r\n\r\n  parseActiveUrlWithoutCombiner() {\r\n    const url = window.location.hash.slice(1).toLowerCase();\r\n    return this._urlSplitter(url);\r\n  },\r\n\r\n  _urlSplitter(url) {\r\n    const urlsSplits = url.split('/');\r\n    return {\r\n      resource: urlsSplits[1] || null,\r\n      id: urlsSplits[2] || null,\r\n      verb: urlsSplits[3] || null,\r\n    };\r\n  },\r\n\r\n  _urlCombiner(splitedUrl) {\r\n    // eslint-disable-next-line no-unused-expressions\r\n    +(splitedUrl.id ? '/:id' : '')\r\n    + (splitedUrl.verb ? `/${splitedUrl.verb}` : '');\r\n    return (splitedUrl.resource ? `/${splitedUrl.resource}` : '/')\r\n      + (splitedUrl.id ? '/:id' : '')\r\n      + (splitedUrl.verb ? `/${splitedUrl.verb}` : '');\r\n  },\r\n};\r\n\r\nexport default UrlParser;\r\n","import { createLikeRestaurantButtonTemplate, createUnlikeRestaurantButtonTemplate } from '../views/templates/template-creator';\r\n\r\nconst LikeButtonInitiator = {\r\n  async init({ likeButtonContainer, favoriteMovies, movie }) {\r\n    this._likeButtonContainer = likeButtonContainer;\r\n    this._movie = movie;\r\n    this._favoriteMovies = favoriteMovies;\r\n\r\n    await this._renderButton();\r\n  },\r\n\r\n  async _renderButton() {\r\n    const { id } = this._movie;\r\n\r\n    if (await this._isMovieExist(id)) {\r\n      this._renderLiked();\r\n    } else {\r\n      this._renderLike();\r\n    }\r\n  },\r\n\r\n  async _isMovieExist(id) {\r\n    const movie = await this._favoriteMovies.getRestaurant(id);\r\n    return !!movie;\r\n  },\r\n\r\n  _renderLike() {\r\n    this._likeButtonContainer.innerHTML = createLikeRestaurantButtonTemplate();\r\n\r\n    const likeButton = document.querySelector('#likeButton');\r\n    likeButton.addEventListener('click', async () => {\r\n      await this._favoriteMovies.putRestaurant(this._movie);\r\n      this._renderButton();\r\n    });\r\n  },\r\n\r\n  _renderLiked() {\r\n    this._likeButtonContainer.innerHTML = createUnlikeRestaurantButtonTemplate();\r\n\r\n    const likeButton = document.querySelector('#likeButton');\r\n    likeButton.addEventListener('click', async () => {\r\n      await this._favoriteMovies.deleteRestaurant(this._movie.id);\r\n      this._renderButton();\r\n    });\r\n  },\r\n};\r\n\r\nexport default LikeButtonInitiator;\r\n"],"names":["navigator","console","log","wb","WorkboxWindow","register","app","App","button","document","querySelector","drawer","content","window","addEventListener","renderPage","swRegister","NowPlaying","Detail","Like","parseActiveUrlWithCombiner","url","location","hash","slice","toLowerCase","splitedUrl","this","_urlSplitter","_urlCombiner","parseActiveUrlWithoutCombiner","urlsSplits","split","resource","id","verb","init","likeButtonContainer","favoriteMovies","movie","_likeButtonContainer","_movie","_favoriteMovies","_renderButton","_isMovieExist","_renderLiked","_renderLike","getRestaurant","innerHTML","createLikeRestaurantButtonTemplate","putRestaurant","createUnlikeRestaurantButtonTemplate","deleteRestaurant"],"sourceRoot":""}